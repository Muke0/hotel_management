"use strict";
/*!
 * Copyright 2019 acrazing <joking.young@gmail.com>. All rights reserved.
 * @since 2019-11-20 15:52:09
 */
Object.defineProperty(exports, "__esModule", { value: true });
const consts_1 = require("monofile-utilities/lib/consts");
const TCPConnection_1 = require("./TCPConnection");
class TCPAdaptor {
    constructor(server, options = {}) {
        this.server = server;
        this.maxHeaderSize = options.maxHeaderSize || 2 << 10;
        this.handshakeTimeout = options.handshakeTimeout || 60 * consts_1.T_SECOND;
    }
    attach(server) {
        this.server.on('connection', (socket) => {
            new TCPConnection_1.TCPConnection(server, socket).prepare(this.handshakeTimeout);
        });
    }
}
exports.TCPAdaptor = TCPAdaptor;
//# sourceMappingURL=TCPAdaptor.js.map