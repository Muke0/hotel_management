"use strict";
/*!
 * Copyright 2019 acrazing <joking.young@gmail.com>. All rights reserved.
 * @since 2019-12-18 11:38:40
 */
Object.defineProperty(exports, "__esModule", { value: true });
const arbitrary_1 = require("./codec/arbitrary");
const json_1 = require("./codec/json");
function normalizeCodec(c) {
    if (arbitrary_1.isArbitraryCodec(c)) {
        return Object.assign(c, {
            encodeReq: c.encode,
            encodeRes: c.encode,
            decodeReq: c.decode,
            decodeRes: c.decode,
        });
    }
    return c;
}
class STMPEncoding {
    static register(...codecs) {
        for (const c of codecs) {
            const ac = normalizeCodec(c);
            for (const t of c.contentType) {
                this.codecs[t] = ac;
            }
        }
    }
    static get(contentType) {
        return contentType ? this.codecs[contentType] : void 0;
    }
}
exports.STMPEncoding = STMPEncoding;
STMPEncoding.codecs = {};
STMPEncoding.register(json_1.jsonCodec);
//# sourceMappingURL=STMPEncoding.js.map