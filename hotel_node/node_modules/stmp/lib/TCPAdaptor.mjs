/*!
 * Copyright 2019 acrazing <joking.young@gmail.com>. All rights reserved.
 * @since 2019-11-20 15:52:09
 */
import { T_SECOND } from 'monofile-utilities/lib/consts';
import { TCPConnection } from './TCPConnection';
var TCPAdaptor = /** @class */ (function () {
    function TCPAdaptor(server, options) {
        if (options === void 0) { options = {}; }
        this.server = server;
        this.maxHeaderSize = options.maxHeaderSize || 2 << 10;
        this.handshakeTimeout = options.handshakeTimeout || 60 * T_SECOND;
    }
    TCPAdaptor.prototype.attach = function (server) {
        var _this = this;
        this.server.on('connection', function (socket) {
            new TCPConnection(server, socket).prepare(_this.handshakeTimeout);
        });
    };
    return TCPAdaptor;
}());
export { TCPAdaptor };
//# sourceMappingURL=TCPAdaptor.js.map