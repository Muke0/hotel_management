/*!
 * Copyright 2019 acrazing <joking.young@gmail.com>. All rights reserved.
 * @since 2019-11-26 13:59:34
 */

import { readVarint, varintLength, writeVarint } from './varint';

describe('varint', () => {
  const values = [
    0,
    0x3f,
    0x40,
    0x7f,
    0x80,
    0xff,
    0x100,
    0x1fff,
    0x2000,
    0xfffff,
    0x100000,
    0xfffffff,
  ];
  for (const value of values) {
    it(`should encode/decode 0x${value.toString(16)} as expected`, () => {
      const encoded = writeVarint(value);
      const decoded = readVarint(encoded);
      const varSize = varintLength(value);
      expect(decoded).toBe(value);
      expect(varSize).toBe(encoded.length);
    });
  }
});
