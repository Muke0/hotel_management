/*!
 * Copyright 2019 acrazing <joking.young@gmail.com>. All rights reserved.
 * @since 2019-12-12 21:11:11
 */

import { ResponseMessage } from './messages';
import { STMPClient } from './STMPClient';
import { STMPSendOptions } from './types';

export interface STMPResponse<S, Q = any>
  extends Readonly<ResponseMessage>,
    stmp.Response<S, Q> {}

export class STMPResponse<S, Q = any> {
  data!: S;

  constructor(
    readonly client: STMPClient,
    readonly request: STMPSendOptions<Q, S>,
    readonly response: ResponseMessage,
  ) {
    Object.assign(this, response);
  }

  get(key: string): string | undefined {
    return this.response.headers[key] ?? this.client.headers[key];
  }
}
